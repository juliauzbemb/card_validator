(()=>{"use strict";var e={p:""};const t=new class{constructor(e,t,r,i,n){[e,t,r,i,n].every((e=>"string"==typeof e))&&(e=document.querySelector(e),t=document.querySelector(t),r=document.querySelector(r),i=document.querySelector(i),n=document.querySelector(n)),this.lengthError=e,this.notDigitsError=t,this.failedError=r,this.noInputError=i,this.notFound=n}setActive(e){e.classList.add("active")}removeActive(e){e.classList.remove("active")}cleanErrors(){this.removeActive(this.lengthError),this.removeActive(this.notDigitsError),this.removeActive(this.failedError),this.removeActive(this.noInputError),this.removeActive(this.notFound)}getActive(){return[...document.querySelector(".errors").querySelectorAll(".active")]}}(".error-length",".error-not-digits",".error-failed",".error-no-input",".error-not-found");const r=new class{constructor(e){"string"==typeof e&&(e=document.querySelectorAll(e)),this.element=[...e]}getIcon(e){return e.querySelector(".icon")}removeActive(){this.element.forEach((e=>this.getIcon(e).classList.remove("icon-active")))}setActive(e){this.getIcon(e).classList.add("icon-active")}}(".card-item");const i=new class{constructor(e){"string"==typeof e&&(e=document.querySelector(e)),this.message=e}setActive(){this.message.classList.add("active")}removeActive(){this.message.classList.remove("active")}}(".message");class n{constructor(e,t){this.low=e,this.hi=t}getAll(){let e=[];for(let t=this.low;t<=this.hi;t++)e.push(t);return e}}const s=["american-express","diners","discover","jcb","mastercard","visa","mir"],o=[{"american-express":{digits:[34,37],length:[15]}},{diners:{digits:[300,301,302,303,304,305,36],length:[14]}},{discover:{digits:[6011,644,645,646,647,648,649,65].concat([...new n(622126,622925).getAll()]),length:new n(16,19).getAll()}},{jcb:{digits:new n(3528,3589).getAll(),length:new n(16,19).getAll()}},{mastercard:{digits:[51,52,53,54,55].concat([...new n(222100,272099).getAll()]),length:[16]}},{visa:{digits:[4],length:[13,16,19]}},{mir:{digits:[2],length:new n(16,19).getAll()}}];function c(e){t.cleanErrors(),i.removeActive(),r.removeActive();let n,c;if(0===e.length)t.setActive(t.noInputError);else if(!1===/^\d+$/i.test(e))t.setActive(t.notDigitsError);else if(e.length>0)if([n,c]=function(e){let t,r,i=0,n=[];if(!/^\d+$/i.test(e))return[t,r];for(let c of e){n.push(c);let e=n.join("");for(let n of o){if(n[s[i]].digits.find((t=>t===Number(e))))return r=s[i],t=n[s[i]].length,[t,r];if(i+=1,i===s.length){i=0;break}}}return[t,r]}(e),n||c){if(function(e,t){let r=e.find((e=>e===Number(t.length)));return!!r}(n,e)||t.setActive(t.lengthError),r.element.some((e=>e.classList.contains(c)))){let e=r.element.findIndex((e=>e.classList.contains(c)));r.setActive(r.element[e])}}else t.setActive(t.notFound)}function l(e,t){return function(e){return e.length%2==0}(t)?e%2==0:e%2!=0}class u{constructor(e){"string"==typeof e&&(e=document.querySelector(e)),this.element=e,this.onSubmitForm=this.onSubmitForm.bind(this),this.onInputForm=this.onInputForm.bind(this),this.input=this.element.querySelector(".input-card"),this.element.addEventListener("submit",this.onSubmitForm),this.element.addEventListener("input",this.onInputForm)}onSubmitForm(e){e.preventDefault();let r=this.input.value;if(""!==r){let e=[...document.querySelector(".errors").querySelectorAll(".active")];c(r),0===e.length&&(!function(e){if(""===e)return!1;let t=[],r=0;for(;r<e.length;r++)l(r,e)?2*e[r]>9?t.push(Number(2*e[r]-9)):t.push(Number(2*e[r])):t.push(Number(e[r]));return t.reduce(((e,t)=>e+t),0)%10==0}(r)?t.setActive(t.failedError):i.setActive())}else t.setActive(t.noInputError)}onInputForm(e){e.preventDefault(),c(this.input.value)}}document.addEventListener("DOMContentLoaded",(()=>{new u(".validator-form")}));e.p})();